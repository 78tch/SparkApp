# SparkApp
[戻る](./README.md)
## 1.バックアップデータの概要
1. 「設定」画面の歯車アイコンからDropboxにプリセットをバックアップできる。
2. バックアップすると、Dropboxのフォルダ直下に「アプリ」->「Spark Amp」とフォルダが作られ、そのなかに「preset_backup.zip」としてバックアップされる。
3. Dropbox に保存されたバックアップデータは、世代管理はされず、常に上書きされ、１つしか保存されない。復元するときも、ファイルを選択することはできず、問答無用で「アプリ -> Spark Amp -> preset_backup.zip」の内容で復元される。
4. バックアップを世代管理したければ、Dropbox のバックアップデータを別途ダウンロードして保管しておき、それを復元したいときはDropbox にアップロードして上書きしておいてから復元すればよい。
5. 「preset_backup.zip」を解凍すると、「preset_backup」フォルダのなかに、プリセットのカテゴリ名（Pop、Rockなど）のフォルダが７つあり、「カテゴリ名フォルダ」のなかに、個々のプリセットのフォルダが格納されている。
6. 個々のプリセットのフォルダのフォルダ名は、「プリセットID」になっている。「プリセットID」は、「8-4-4-4-12文字」のランダム英数字である。
7. 内部的にはプリセットは「プリセットID」で管理されており、「プリセット名」は単なるラベルである。
8. プリセットのフォルダのなかには、アイコン画像である「icon.png」ファイルと、プリセットの本体である「preset.json」ファイルが格納されている。
9. 「preset.json」はテキストファイルであり、開くとどういう設定になっているか、読むことができる。
10. iPad でバックアップしたデータを、Android 端末に復元することもできた。

## 2.バックアップデータのフォルダ・ファイル構成
| No | Images | Memo|
|---|---|---|
| 1  | ![alt text](images/Backup/01.png) | Dropboxの「アプリ -> Spark amp」画面。「preset_backup.zip」ファイルがバックアップデータ。世代管理はされず、常に上書きされる。 |
| 2  | ![alt text](images/Backup/02.png) | 「preset_backup」フォルダの中身。カテゴリ名のフォルダが格納されている。 |
| 3  | ![alt text](images/Backup/03.png) | 「Acoustic」フォルダの中身。ひとつひとつのフォルダが、プリセットである。フォルダ名は、「プリセットＩＤ」で、システム内部での管理に使われている。「プリセット名」とはまた別である。「category.json」ファイルには、プリセットＩＤが書き込まれていて、各プリセットがアプリで表示される並び順は、このファイルに書かれている順である。 |
| 4  | ![alt text](images/Backup/04.png) | プリセットのフォルダのなかには、アイコン画像である「icon.png」ファイルと、プリセットの本体である「preset.json」ファイルが格納されている。「preset.json」はテキストファイルであり、開くとどういう設定になっているか、読むことができる。|
  
## 3.プリセットデータの内容
| No | Images | Memo|
|---|---|---|
|1|![alt text](images/JSON/01.png)|「プリセット・カテゴリ」の各フォルダには「category.json」ファイルが１つずつあり、そのカテゴリのフォルダに格納されている各プリセットの「プリセットＩＤ」「バージョン（0.7で固定）」「名前」「アイコン画像のファイル名（icon.pngで固定）」「説明文」が書き込まれている。<br>各プリセットがアプリ画面で表示される並び順は、このファイルに書かれている順である。|
|2|![alt text](images/JSON/02.png)|プリセットのフォルダのなかの「preset.json」ファイル。プリセットの実体であり、各エフェクトの設定値が書き込まれている。大項目としては、「BPM」「各エフェクトの設定値（７項目）」「固定値（"jamup_speaker"）」「プリセットのメタ情報」の４つある。|
|3|![alt text](images/JSON/03.png)|プリセットのメタ情報の内容は、「プリセットID」「バージョン（0.7で固定）」「説明文」「プリセット名」「アイコン画像のファイル名（icon.pngで固定）」の５つ。「プリセットID」は、フォルダ名でもあり、「category.json」にも書き込まれている。|
|4|![alt text](images/JSON/04.png)|「各エフェクトの設定値」の大項目は「設定値」「DSP ID」「ON／OFFの状態」「固定値（"speaker_fx"で固定）」の４つ。「設定値」は、「index」と「実際の値」がペアで格納されている。ツマミの数だけペアがある。設定値７項目の並び順は、シグナルパスどおり、「1.GATE、2.COMP/WAH、3.DRIVE、4.AMP、5.MOD/EQ、6.DELAY、7.REVERB」となっている。|

[戻る](./README.md)