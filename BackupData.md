# SparkApp
[戻る](./README.md)
## 1.バックアップデータの概要
1. Dropbox に保存されたバックアップデータは、世代管理はされず、常に上書きされ、１つしか保存されない。
2. 世代管理したければ、Dropbox のバックアップデータを別途保管しておき、それを復元したいときはDropbox にアップロードして上書きすればよい。
3. Dropboxのフォルダ直下に「アプリ」->「Spark Amp」とフォルダが作られ、そのなかに「preset_backup.zip」としてバックアップされる。
4. 「preset_backup.zip」を解凍すると、「preset_backup」フォルダのなかに、プリセットのカテゴリ名（Pop、Rockなど）のフォルダが７つあり、「カテゴリ名フォルダ」のなかに、個々のプリセットのフォルダが格納されている。
5. 個々のプリセットのフォルダのフォルダ名は、「プリセットID」になっている。「プリセットID」は、「8-4-4-4-12文字」のランダム英数字である。
6. プリセットのフォルダのなかには、アイコン画像である「icon.png」ファイルと、プリセットの本体である「preset.json」ファイルが格納されている。
7. 「preset.json」はテキストファイルであり、開くとどういう設定になっているか、読むことができる。
8. iPad でバックアップしたデータを、Android 端末に復元することもできた。

## 2.バックアップデータのフォルダ・ファイル構成
| No | Images | Memo|
|---|---|---|
| 1  | ![alt text](images/Backup/01.png) | Dropboxの「アプリ -> Spark amp」画面。「preset_backup.zip」ファイルがバックアップデータ。世代管理はされず、常に上書きされる。 |
| 2  | ![alt text](images/Backup/02.png) | 「preset_backup」フォルダの中身。カテゴリ名のフォルダが格納されている。 |
| 3  | ![alt text](images/Backup/03.png) | 「Acoustic」フォルダの中身。ひとつひとつのフォルダが、プリセットである。フォルダ名は、「プリセットＩＤ」で、システム内部での管理に使われている。「プリセット名」とはまた別である。「category.json」ファイルには、プリセットＩＤが書き込まれていて、各プリセットがアプリで表示される並び順は、このファイルに書かれている順である。 |
| 4  | ![alt text](images/Backup/04.png) | プリセットのフォルダのなかには、アイコン画像である「icon.png」ファイルと、プリセットの本体である「preset.json」ファイルが格納されている。「preset.json」はテキストファイルであり、開くとどういう設定になっているか、読むことができる。|
  
## 3.プリセットデータの内容
| No | Images | Memo|
|---|---|---|
|1|![alt text](images/JSON/01.png)|「プリセット・カテゴリ」の各フォルダには「category.json」ファイルが１つずつあり、そのカテゴリに格納されているプリセットの「プリセットＩＤ」「バージョン」「名前」「アイコン画像のファイル名」「説明文」が書き込まれている。<br>各プリセットがアプリ画面で表示される並び順は、このファイルに書かれている順である。|
|2|![alt text](images/JSON/02.png)|プリセットのフォルダのなかの「preset.json」ファイル。プリセットの実体であり、各エフェクトの設定値が書き込まれている。大項目としては、「BPM」「７項目の設定値」「固定値（すべてのプリセットで同じ値）」「プリセットのメタ情報」の４つある。|
|3|![alt text](images/JSON/03.png)|メタ情報は、「プリセットID」「バージョン」「説明文」「プリセット名」「アイコン画像のファイル名」の５つ。「プリセットID」は、フォルダ名でもあり、「category.json」にも書き込まれている。|
|4|![alt text](images/JSON/04.png)|各エフェクターの設定値が書き込まれている。大項目は「設定値」「DSP ID」「ON／OFFの状態」「固定値」の４つ。「設定値」の項目として、「index」と「実際の値」がペアで格納されている。設定値の並び順は、シグナルパスどおり、「GATE、COMP/WAH、DRIVE、AMP、MOD/EQ、DELAY、REVERB」となっている。|

[戻る](./README.md)